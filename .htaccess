# Enable PHP execution
AddHandler application/x-httpd-php .php

# Set default character set
AddDefaultCharset UTF-8

# Enable rewriting
RewriteEngine On

# Redirect HTTP to HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Handle errors
ErrorDocument 404 /404.html
ErrorDocument 500 /500.html

# Protect sensitive files
<FilesMatch "^\.env">
    Order allow,deny
    Deny from all
</FilesMatch>

# Enable CORS
Header set Access-Control-Allow-Origin "*"
Header set Access-Control-Allow-Methods "GET, POST, OPTIONS"
Header set Access-Control-Allow-Headers "Content-Type"

# Protect composer files
<Files composer.json>
    Order allow,deny
    Deny from all
</Files>
<Files composer.lock>
    Order allow,deny
    Deny from all
</Files>

# Protect vendor directory
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^vendor/ - [F,L]
</IfModule>

# Set proper permissions
<IfModule mod_authz_core.c>
    Require all granted
</IfModule>
<IfModule !mod_authz_core.c>
    Order allow,deny
    Allow from all
</IfModule> 